<html>
<head>
    <Title>BookScan&Find</Title>
    <link rel="stylesheet" type="text/css" href="app.css">
</head>

<body>
    <div id="login-box">
        <div class="left">
            <h1>Sign In</h1>

            <input type="text" id="email" name="email" placeholder="Email"/>
            <input type="password" id="password" name="password" placeholder="Password"/>

            <input type="submit" id="login" name="login" value="Login"/>
        </div>
    </div>
</body>

<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-analytics.js";
    import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-database.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";

    // Firebase configuration object
    const firebaseConfig = {
      apiKey: "AIzaSyDmTgqh5EXrrtRDJYSY6MvVE5gD7pwJfOE",
      authDomain: "bookscanandfind.firebaseapp.com",
      databaseURL: "https://bookscanandfind-default-rtdb.firebaseio.com",
      projectId: "bookscanandfind",
      storageBucket: "bookscanandfind.appspot.com",
      messagingSenderId: "214479740973",
      appId: "1:214479740973:web:cb437a5a4d9f22cdff18a4",
      measurementId: "G-MFXHQWH2Y3"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const database = getDatabase(app);
    const auth = getAuth();

    document.getElementById('login').addEventListener('click', async (e) => {
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;
        
        try {
            // Firebase authentication
            const userCredential = await signInWithEmailAndPassword(auth, email, password);
            const user = userCredential.user;

            // Save user data in Firebase Realtime Database
            await set(ref(database, 'Admin/' + user.uid), {
                email: email
            });

            // Redirect to the dashboard
            window.location = 'dashboard.html'; // Change this to the path of your dashboard page
        } catch (error) {
            alert(error.message);
        }
    });
</script>
</html>
